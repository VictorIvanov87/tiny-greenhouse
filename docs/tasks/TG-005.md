# TG-005 — Primary Routes & Sidebar Navigation (no header nav)

**Goal**  
Create the **main route map** and a **left sidebar** (no header navigation). Add minimal placeholder screens so each route is clearly distinct. Hide the Setup Wizard from the sidebar once the user has completed it.

> Follow `frontend/AGENTS.md` and the green palette. Keep changes in the frontend only.

---

## Routes
- `/dashboard` — main overview (already exists; keep as default landing for authenticated users with `setupCompleted:true`).
- `/notifications` — notification preferences screen (placeholder).
- `/sensor-data` — tabular/data-centric view; later may link to per-sensor pages like `/sensor/water` (placeholder now).
- `/settings` — general app/greenhouse settings, e.g., timelapse capture schedule (placeholder).
- `/assistant` — chat panel with the LLM assistant (placeholder).
- `/logout` — performs `signOut()` then redirects to `/login` (no UI).

> `/setup` must **not** appear in the sidebar if `setupCompleted:true`.

---

## Scope
- Add the routes above into `routes.tsx` (protected, except `/login`).
- Implement a **left sidebar** using Flowbite (Sidebar + icons) with entries:
  1. Dashboard
  2. Notifications
  3. Sensor Data
  4. Settings
  5. Assistant
- Add a **bottom user section** inside the sidebar:
  - Shows the current user's email (or display name if present).
  - A small avatar placeholder (initials). Clicking opens a simple menu with one action for now: **Logout** → navigate to `/logout`.
- Add **placeholder pages** for each route with just an `h1` and 1–2 basic UI elements so the route feels distinct (e.g., a Flowbite Card or Table stub).
- Remove/avoid header navigation; keep only the sidebar + main content area (AppShell).

## Out of Scope
- Real business logic for these pages.
- Per-sensor deep pages (e.g., `/sensor/water`) — only mention as future link from `/sensor-data`.

---

## Files to Create/Modify (suggested)
- `src/app/AppShell.tsx` — ensure layout is `min-h-screen flex` with **sidebar** at left and `<main className="flex-1">` for route content. No header nav.
- `src/app/routes.tsx` — define the routes; guard as per TG-003 (redirect to `/setup` if needed).
- `src/shared/ui/SidebarNav.tsx` — Flowbite Sidebar with items (active state) and bottom user section (avatar/initials + logout).
- `src/features/notifications/NotificationsPage.tsx` — placeholder.
- `src/features/sensor-data/SensorDataPage.tsx` — placeholder (use a Flowbite `Table` stub).
- `src/features/settings/SettingsPage.tsx` — placeholder.
- `src/features/assistant/AssistantPage.tsx` — placeholder.
- `src/features/auth/Logout.tsx` — component that calls `signOut()` and redirects to `/login`.

---

## UX Requirements
- Sidebar fixed on the left:
  - Desktop (`md+`): visible; width ~`w-64`.
  - Mobile: collapsible (a toggle button can live inside the sidebar top; keep it minimal).
- Active item styling matches the palette (`text-evergreen`, subtle `bg-sage` on active).
- Bottom user block: email (truncate) + round avatar with initials. On click → menu with **Logout** (navigates to `/logout`).

---

## Steps (Execution Plan)
1. Update **AppShell** to a sidebar-first layout (`min-h-screen flex`, left aside with Sidebar, right `<main className="flex-1">`). Remove header nav.
2. Create `SidebarNav.tsx` with Flowbite Sidebar items for all listed routes. Read active route from the router to style the current item.
3. Add the bottom user section in the sidebar (read from `useAuth()`; initials from email).
4. Wire routes in `routes.tsx`:
   - Protected: `/dashboard`, `/notifications`, `/sensor-data`, `/settings`, `/assistant`, `/logout`.
   - Public: `/login`, `/setup` (but guard will redirect to `/login` if not authenticated).
   - Hide `/setup` from the sidebar when `setupCompleted:true`.
5. Create placeholder pages with a distinct `h1` and one Flowbite component each:
   - `/notifications`: Card with a couple of switches (disabled for now).
   - `/sensor-data`: Table stub with mock rows.
   - `/settings`: Card with a stub form (e.g., “Timelapse: every 24h at 09:00” – disabled inputs).
   - `/assistant`: Empty chat panel box.
6. Implement `Logout.tsx` to call `signOut()` and `navigate('/login')`.
7. Apply palette classes (evergreen, sage, soil) to the sidebar and active items.

---

## Smoke Checks (must pass)
- Authenticated user with `setupCompleted:true` sees **only** the sidebar + main content (no header nav).
- Sidebar shows the 5 entries; `/setup` is **not** listed.
- Each route renders a distinct placeholder and URL updates correctly.
- Bottom user section shows email and lets you logout via `/logout`.
- Layout fills full height; no horizontal scroll at sm/md/lg.

---

## Notes for Agents
- Keep diffs focused; do not reformat unrelated files.
- Use Flowbite Sidebar; Tailwind for layout/spacing.
- Do not add new UI libraries.
