TG-020 — Backend: Assist schema + small‑talk guard

Goal
Make /api/assist accept optional targeting and tuning parameters, and avoid triggering RAG for small‑talk or weak queries.

Scope
1) Assist request schema (Zod)
- Extend the existing AssistRequest schema to accept optional fields:
  • cropId?: string
  • variety?: string
  • topK?: number (int, 1–12; default 6)
  • temperature?: number (0–1; default 0.2)
- Keep strict validation: unknown keys should fail with 400.
- Backward compatible: { message } alone must still be valid.
- File touch: backend/src/lib/schemas.ts and any schema index barrel if present.

2) Route behavior
- In backend/src/routes/assist.ts:
  • Read the new options; when absent, fall back to the current greenhouse context (same behavior as today).
  • Pass options to retrieval and LLM layers.
  • Include the effective options in a debug `meta` block when RAG_DEBUG=true (optional but helpful).

3) Small‑talk / weak‑signal guard
- In backend/src/services/assist.ts (or the composing service):
  • If message length < ASSIST_MIN_QUERY_LEN (env, default 8), return a generic domain help reply without citations.
  • After retrieval, if the top score < RAG_SCORE_FLOOR (env, default 0.20), return the same generic reply (no citations).
  • Generic reply text: short, friendly, and domain‑specific (e.g., prompt the user to ask about light hours, watering cadence, temp bands, growth stages).

4) Env & docs
- Add to backend/.env.example:
  ASSIST_MIN_QUERY_LEN=8
  RAG_SCORE_FLOOR=0.20
- Update backend/README.md:
  • Document the new optional fields.
  • Add curl examples for: plain message, targeted crop/variety, and demonstrating the small‑talk guard.
  • Mention the env toggles and how to test with RAG_DEBUG=true.

Acceptance
- POST /api/assist with { "message":"hello" } returns 200 with a generic domain reply and no citations.
- POST /api/assist with { "message":"Best light hours for Basket of Fire seedlings?", "cropId":"chillies", "variety":"basket-of-fire", "topK":6, "temperature":0.2 } returns grounded answer with ≥1 citation when RAG has chunks.
- Unknown fields (e.g., { "message":"x", "oops":1 }) → 400 with validation details.
- Legacy behavior preserved: { "message":"..." } remains valid and uses greenhouse context by default.

Out of scope
- Changes to rate limiting, streaming responses, or chat history semantics.
- Frontend changes (the assistant UI already handles 429 and can stop fallback once the endpoint accepts the new fields).

Dev notes
- Keep diffs surgical: schemas.ts, routes/assist.ts, services/assist.ts, .env.example, README.
- Use existing logger and error envelope utilities; return consistent { ok, data | error } shapes where applicable.
