# TG-004 — Dashboard Shell (layout, nav, placeholders)

**Goal**  
Create the **Dashboard** route and base layout (navbar, content grid, placeholders) using Flowbite + Tailwind and the project’s green palette. No real data yet—use mock data/functions.

> Follow `frontend/AGENTS.md`. Keep changes in the frontend. No new runtime UI libraries.

---

## Scope
- Add `/dashboard` route (protected).
- Implement **AppShell** layout: top navbar (brand + user menu), left sidebar on `md+`, main content area.
- Dashboard content:
  - **KPI cards** (4 cards): e.g., Temperature, Humidity, Soil Moisture, Light Hours.
  - **Recent telemetry table** (mock rows).
  - **Timelapse preview** (static image placeholder or empty state).
- Use the palette:
  - `evergreen` (primary), `moss` (secondary), `sage` (bg), `soil` (text/accents), `sunlight` (warning), `chili` (error).
- Handle empty/loading/error states gracefully with simple placeholders.
- Sign out from navbar → navigate to `/login`.

## Out of Scope
- Real charts/graphs (no extra chart lib).
- Real API calls or sockets; use static/mock functions for now.

---

## Files to Create/Modify (suggested)
- `src/app/AppShell.tsx` — layout wrapper (`min-h-screen flex flex-col` with header/footer/aside).
- `src/features/dashboard/DashboardPage.tsx` — mounts inside AppShell `<main>`.
- `src/features/dashboard/components/KpiCards.tsx` — 4 Flowbite cards with icons and values.
- `src/features/dashboard/components/RecentTelemetry.tsx` — table with mock rows.
- `src/features/dashboard/components/TimelapsePreview.tsx` — placeholder box/image.
- `src/shared/ui/Brand.tsx` — brand/logo stub with evergreen color.
- `src/shared/ui/UserMenu.tsx` — shows current user email (if available) and Sign out.

(If `AppShell` already exists, extend it; otherwise create it and mount around private routes.)

---

## UX Requirements
- **Responsive**:
  - Mobile: only top navbar + stacked content (cards → table → preview).
  - `md+`: left sidebar (nav) and content grid (2 cols where suitable).
- **Accessibility**: buttons/links must have accessible labels; color contrast sufficient.
- **Skeleton/empty**: show a simple skeleton while “loading”; show empty notices if no data.
- **Theme**: apply the green palette via Tailwind classes (e.g., `text-evergreen`, `bg-sage`, borders `soil`).

---

## Steps (Execution Plan)
1. Create `AppShell` with header (`bg-sage`, `text-soil`), optional sidebar (`md:w-64`), main (`flex-1`).
2. Navbar: brand on the left; on the right a `UserMenu` with Sign out.
3. DashboardPage: render `KpiCards`, `RecentTelemetry`, `TimelapsePreview`.
4. Use mock data util (inline or small helper) to feed cards/table.
5. Wire Sign out to Firebase `signOut()` and navigate to `/login`.
6. Ensure route protection: unauthenticated users are redirected to `/login` (from TG-002 logic).
7. Smoke checks below.

---

## Smoke Checks (must pass)
- `/dashboard` loads only when authenticated and `setupCompleted:true`.
- Layout fills full height; no horizontal scroll at sm/md/lg.
- KPI cards show mock values; table renders mock rows; preview box is visible.
- Navbar Sign out returns to `/login`.
- Palette is applied (primary buttons in `evergreen`, subtle bg `sage`).

---

## Notes for Agents
- Do not add new chart libraries; keep it simple.
- Reuse Flowbite components (Card, Navbar, Dropdown, Table, Button).
- Keep diffs focused; do not reformat unrelated files.
